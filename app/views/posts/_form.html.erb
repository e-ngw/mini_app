<%= form_with model: post, class: "new_post" do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <div class="mb-3" data-controller="image-preview">
    <%= f.label :image %>
    <%= f.file_field :image, class: "form-control", accept: 'image/*', data: { action: "change->image-preview#preview" } %>
    <%= f.hidden_field :image_cache %>

    <!-- プレビュー用のimgタグ -->
    <div class="text-center mt-2">
      <% if @post.image.present? %>
        <img src="<%= @post.image.url %>" data-image-preview-target="preview" class="img-fluid" style="max-height: 300px;">
      <% else %>
        <img data-image-preview-target="preview" class="img-fluid d-none" style="max-height: 300px;">
      <% end %>
    </div>
  </div>
  <div class="mb-3">
    <%= f.label :body %>
    <%= f.text_area :body, class: "form-control", rows: "5" %>
  </div>
  <div class="mb-3">
    <%= f.label :restaurant_info %>
    <%= f.text_field :restaurant_info, class: "form-control" %>
  </div>
  <div class="mb-3">
    <%= f.label :food_info %>
    <%= f.text_field :food_info, class: "form-control" %>
  </div>
  <div class="mb-3">
    <%= f.label :tag_names, "タグ"%>
    <%= f.text_field :tag_names, value: @tag_list, class: "form-control", placeholder: ",で区切って入力してください" %>
  </div>
  <%# ここのnilは新規や更新などアクションに適した文字を生成してくれる %>
  <%= f.submit nil, class: "btn btn-primary" %>
<% end %>
